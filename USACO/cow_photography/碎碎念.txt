感觉这道题比较难以入手

暴力怎么写？
注意到在某次照相中一些奶牛跑了出去然后再插入到新位置

这个过程中那些没跑出去的奶牛之间的相对次序不会改变
而那些跑出去的奶牛可以随便插入

因此我们枚举子集，也就是哪些奶牛跑出去了
然后去验证剩下的奶牛在本次照相的时候和上次照相的相对次序是否发生变化。

暴力搜索

我们发现奶牛的ID互不相同，可以离散化

不过为什么我们可以找出初始位置呢？

考虑第一次照相的时候，如果有奶牛跑出去然后插回来
我们枚举了这些奶牛，但是这些奶牛在跑出去之前的位置可以是任意的

就不能找出初始位置了？

发现题意读错了

是否可能多组解？

是否可以把第一张照片当作解？（NO）

是否可以把其中一张照片当做解？(NO)

逐位确定A
对于A[1]
如果5个序列的第一个数字中出现了>=3次x
那么A[1]=x

因为如果A[1]!=x
那么x要移动到第一位，要么它自己移动到A[1]，那么它前面的人全部移动到它后面
没有第三种方案，所以如果第一位有出现3次以上x，那么A[1]=x

对于A[n]也有类似的结论

如果x在第一位出现了5次，那么显然x从来没动过，问题转化为n-1的子问题

如果x在第一位出现了4次，那么A[1]=x,并且x在剩下的那张照片中移动了一次

那么我们在5张照片中删除x，合拢序列，问题转化为n-1的子问题

简化我们的过程：如果x在第一位或者最后一位出现了>=3次，那么我们把序列中的x删除并合拢序列，转化为n-1的问题解决

那么如果所有x都在第一位和最后一位都<3次呢？

停止这样的讨论

如果有两张照片中数字A和数字B的位置关系相反
那么数字A和数字B必定至少有一个数字在其中一张照片里重插过

如果A和B有这样的关系，就把A和B连边

感觉没什么用

对N的大小进行讨论

N=1
显然可以解决
N=2
5张照片中重复次数>=3的照片就是初始位置
（因为一个人的移动最多一次）
N=3

我们是否可以先解决N-1的问题再来扩展得到N的问题呢
我们删除数字x，解决了N-1的问题，求出了剩下N-1个数字的相对次序
然后枚举x在其中的位置然后check

怎么check？
如果有一个不是x的数字在至少2张照片中与x的相对次序和初始位置中的相对次序不同
则方案不可行

否则一定可行吗？

写个数据生成器随机一些数据来手算感受一下
同时可以留着对拍用

发现好难写啊

我们不去关注具体位置，去关注两个数之间的次序

比如说数字1和2
如果在5张照片中都是1在2前面
那么初始位置1也在2前面
Yes，否则的话必定要其中一个数字进行重插，1和2分别重插一次也只可能造成2张照片的次序改变

所以对于(x,y)如果有>=3张照片中x<y
那么初始位置x<y
这样O(N^3)可以确定初始位置吗？

预处理可以做到O(N^2)
因为有5张照片，而x和y的相对次序只有2种，鸽巢原理必定有一种次序是>=3次
这就是初始位置的次序

然后我们其实并不需要枚举所有(x,y)
如果我们已经处理好了前n-1个数字的序列，那么对于第n个数字，只要二分搜索
找出最大的y<它，那么把它插入到y后面。

比较次序的话不需要扫描整个5张照片
对于每个数字存放它的5张照片中出现的位置即可


发现插入的过程是O(N^2)的
我们就变成了插入排序了
那么我们的框架改变一下，用归并排序！
O(1)时间比较两个数字的次序大小，这样O(NlogN)
